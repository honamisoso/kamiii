<div class="container">
  <h2>アイテム新規登録</h2>
  <%= form_with model: @post, url: posts_path, method: :post do |f| %>
    <div class="form-group">
      <%= f.label :title, 'タイトル' %>
      <%= f.text_field :title, class: "form-control" %>
    </div>
    <div class="form-group">
      <%= f.label :post_image, '画像' %><br>
      <%= f.file_field :post_image %>
    </div>
    <div class="form-group">
      <%= f.label :tag, 'タグ' %>
      <%= f.text_field :tag, class: "form-control" %>
      <small>スペースで区切ることで複数指定できます。</small>
    </div>

    <div class="form-group">
      <%= f.label :evaluation, '評価' %><br>
      <span id="evaluation"></span>
    </div>

    <div class="form-group">
      <%= f.label :body, '商品紹介' %>
      <%= f.text_area :body, rows: 5, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.submit '登録', class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>

<script>
  $(document).ready(function() {
    document.querySelector('#evaluation').innerHTML = "";
    raty(document.querySelector('#evaluation'), {
      starOn: "<%= asset_path('raty/star-on.png') %>",
      starOff: "<%= asset_path('raty/star-off.png') %>",
      starHalf: "<%= asset_path('raty/star-half.png') %>",
      scoreName: 'post[evaluation]',
    });
  });
</script>